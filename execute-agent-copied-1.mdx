---
title: "Executar Agente"
---

`POST /agents/{id}/execute`

Executar um agente específico por ID.

### **Exemplos de Código**

<CodeGroup>

```http cURL
curl --request POST \
  --url 'https://api.tess.im/agents/{id}/execute' \
  --header 'Authorization: Bearer YOUR_API_KEY' \
  --header 'Content-Type: application/json' \
  --data '{
    "temperature": "1",
    "model": "tess-5",
    "messages": [
        { "role": "user", "content": "Hello, how can you help me today?" }
    ],
    "tools": "no-tools",
    "wait_execution": false,
    "file_ids": [123, 321]
  }'
```


```json Node.js
const axios = require('axios');

const data = {
    "temperature": "1",
    "model": "tess-5",
    "messages": [
        { "role": "user", "content": "Hello, how can you help me today?" }
    ],
    "tools": "no-tools",
    "wait_execution": false,
    "file_ids": [123, 321]
  };

const config = {
  method: 'post',
  url: 'https://api.tess.im/agents/{id}/execute',
  headers: {
    'Authorization': 'Bearer YOUR_API_KEY',
    'Content-Type': 'application/json'
  },
  data: data
};

try {
  const response = await axios(config);
  console.log(response.data);
} catch (error) {
  console.error(error);
}
```


```python Python
import requests
import json

url = "https://api.tess.im/agents/{id}/execute"
headers = {
    "Authorization": "Bearer YOUR_API_KEY",
    "Content-Type": "application/json"
}
data = {
    "temperature": "1",
    "model": "tess-5",
    "messages": [
        { "role": "user", "content": "Hello, how can you help me today?" }
    ],
    "tools": "no-tools",
    "wait_execution": false,
    "file_ids": [123, 321]
  }

response = requests.post(url, headers=headers, json=data)
print(response.json())
```


```php PHP
<?php
$curl = curl_init();

$data = [
    "temperature" => "1",
    "model" => "tess-5",
    "messages" => [
        [ "role" => "user", "content" => "Hello, how can you help me today?" ]
    ],
    "tools" => "no-tools",
    "wait_execution" => false,
    "file_ids": [123, 321]
];

curl_setopt_array($curl, [
  CURLOPT_URL => "https://api.tess.im/agents/{id}/execute",
  CURLOPT_RETURNTRANSFER => true,
  CURLOPT_ENCODING => "",
  CURLOPT_MAXREDIRS => 10,
  CURLOPT_TIMEOUT => 30,
  CURLOPT_HTTP_VERSION => CURL_HTTP_VERSION_1_1,
  CURLOPT_CUSTOMREQUEST => "POST",
  CURLOPT_POSTFIELDS => json_encode($data),
  CURLOPT_HTTPHEADER => [
    "Authorization: Bearer YOUR_API_KEY",
    "Content-Type: application/json"
  ]
]);

$response = curl_exec($curl);
$err = curl_error($curl);

curl_close($curl);

if ($err) {
  echo "Error: " . $err;
} else {
  echo $response;
}
```


```java Java
import com.fasterxml.jackson.databind.ObjectMapper;
import java.net.URI;
import java.net.http.HttpClient;
import java.net.http.HttpRequest;
import java.net.http.HttpResponse;
import java.util.List;
import java.util.Map;

public class Main {
    public static void main(String[] args) throws Exception {
        ObjectMapper mapper = new ObjectMapper();

        Map<String, Object> data = Map.of(
            "temperature", "1",
            "model", "tess-5",
            "messages", List.of(Map.of("role", "user", "content", "Hello, how can you help me today?")),
            "tools", "no-tools",
            "wait_execution", false,
            "file_ids", List.of(123, 321)
        );

        String jsonPayload = mapper.writeValueAsString(data);

        HttpClient client = HttpClient.newHttpClient();
        HttpRequest request = HttpRequest.newBuilder()
            .uri(URI.create("https://api.tess.im/agents/{id}/execute"))
            .header("Authorization", "Bearer YOUR_API_KEY")
            .header("Content-Type", "application/json")
            .POST(HttpRequest.BodyPublishers.ofString(jsonPayload))
            .build();

        HttpResponse<String> response = client.send(request,
            HttpResponse.BodyHandlers.ofString());
        System.out.println(response.body());
    }
}
```


```go Go
package main

import (
    "fmt"
    "strings"
    "io/ioutil"
    "net/http"
)

func main() {
    payload := `{
        "temperature": "1",
        "model": "tess-5",
        "messages": [
            { "role": "user", "content": "Hello, how can you help me today?" }
        ],
        "tools": "no-tools",
        "wait_execution": false,
        "file_ids": [123, 321]
    }`

    client := &http.Client{}
    req, err := http.NewRequest("POST", "https://api.tess.im/agents/{id}/execute", strings.NewReader(payload))
    if err != nil {
        fmt.Println(err)
        return
    }
    
    req.Header.Add("Authorization", "Bearer YOUR_API_KEY")
    req.Header.Add("Content-Type", "application/json")
    
    resp, err := client.Do(req)
    if err != nil {
        fmt.Println(err)
        return
    }
    defer resp.Body.Close()
    
    body, err := ioutil.ReadAll(resp.Body)
    if err != nil {
        fmt.Println(err)
        return
    }
    
    fmt.Println(string(body))
}
```


```jsonnet .NET
using System;
using System.Net.Http;
using System.Text;
using System.Threading.Tasks;
using Newtonsoft.Json;
using System.Collections.Generic;

class Program
{
    static async Task Main(string[] args)
    {
        using (var client = new HttpClient())
        {
            client.DefaultRequestHeaders.Add("Authorization", "Bearer YOUR_API_KEY");

            var data = new
            {
                temperature = "1",
                model = "tess-5",
                messages = new List<object> { new { role = "user", content = "Hello, how can you help me today?" } },
                tools = "no-tools",
                wait_execution = false,
                file_ids = new List<int> { 123, 321 }
            };

            var jsonPayload = JsonConvert.SerializeObject(data);
            var content = new StringContent(jsonPayload, Encoding.UTF8, "application/json");

            try
            {
                var response = await client.PostAsync("https://api.tess.im/agents/{id}/execute", content);
                response.EnsureSuccessStatusCode();
                string responseBody = await response.Content.ReadAsStringAsync();
                Console.WriteLine(responseBody);
            }
            catch (HttpRequestException e)
            {
                Console.WriteLine("\nException Caught!");
                Console.WriteLine("Message :{0} ", e.Message);
            }
        }
    }
}
```


```ruby Ruby
require 'uri'
require 'net/http'
require 'json'

uri = URI('https://api.tess.im/agents/{id}/execute')
http = Net::HTTP.new(uri.host, uri.port)
http.use_ssl = true

request = Net::HTTP::Post.new(uri)
request['Authorization'] = 'Bearer YOUR_API_KEY'
request['Content-Type'] = 'application/json'
request.body = {
    "temperature": "1",
    "model": "tess-5",
    "messages": [
        { "role": "user", "content": "Hello, how can you help me today?" }
    ],
    "tools": "no-tools",
    "wait_execution": false,
    "file_ids": [123, 321]
}.to_json

response = http.request(request)
puts response.read_body
```

</CodeGroup>

### **Cabeçalhos**

| **Parâmetro**  | **Tipo** | **Obrigatório** | **Descrição**                                                                       |
| :------------- | :------- | :-------------- | :---------------------------------------------------------------------------------- |
| x-workspace-id | integer  | Não             | ID do workspace. Se não fornecido, o workspace selecionado pelo usuário será usado. |

<Note>
  **Nota:** Este campo será obrigatório em uma versão futura da API. É altamente recomendado defini-lo agora para garantir compatibilidade com atualizações futuras.
</Note>

### **Parâmetros de Caminho**

| **Parâmetro** | **Tipo** | **Obrigatório** | **Descrição**  |
| :------------ | :------- | :-------------- | :------------- |
| id            | integer  | Sim             | O ID do agente |

### **Corpo da Requisição**

| **Parâmetro**  | **Tipo** | **Obrigatório**         | **Descrição**                                                                                                                                                                                                                                |
| :------------- | :------- | :---------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| answers        | object   | Sim                     | As respostas do agente                                                                                                                                                                                                                       |
| messages       | array    | Apenas para Agente Chat | As mensagens do agente                                                                                                                                                                                                                       |
| wait_execution | boolean  | Não                     | Indica se a execução deve aguardar até a conclusão. O timeout é de 100 segundos. Para execuções mais longas, use `wait_execution=false` em combinação com o endpoint Obter Resposta do Agente com uma estratégia de polling (padrão: false). |
| file_ids       | array    | Não                     | Array de IDs de arquivo para anexar à execução.                                                                                                                                                                                              |

#### **Funções das Mensagens (Modelos do Tipo Chat)**

Para modelos do tipo chat, o array `messages` suporta as seguintes funções:

| **Função**  | **Obrigatório** | **Descrição**                                                                               |
| :---------- | :-------------- | :------------------------------------------------------------------------------------------ |
| `user`      | Sim             | Mensagens do usuário. Devem ser emparelhadas com mensagens `assistant`.                     |
| `assistant` | Sim             | Mensagens do assistente. Devem ser emparelhadas com mensagens `user`.                       |
| `developer` | Não             | Mensagem opcional do desenvolvedor. **Permitida apenas como a primeira mensagem** no array. |
| `system`    | Não             | **Não suportado**. Usar esta função causará um erro.                                        |

**Regras importantes:**

- As mensagens devem alternar entre as funções `user` e `assistant` (após a mensagem opcional `developer`).
- A função `developer` só pode aparecer como a primeira mensagem no array e será extraída antes do processamento do restante.
- Se duas mensagens consecutivas tiverem a mesma função (por exemplo, duas mensagens `user`), a API retornará um erro de validação: "Chat messages must be a pair of user/assistant".
- A função `system` não é suportada e causará um erro.

**Exemplo com mensagem developer:**

```json
{
  "messages": [
    { "role": "developer", "content": "Você é um assistente prestativo." },
    { "role": "user", "content": "Olá!" },
    { "role": "assistant", "content": "Oi! Como posso ajudá-lo?" },
    { "role": "user", "content": "Como está o tempo?" }
  ]
}
```

**Exemplo sem mensagem developer:**

```json
{
  "messages": [
    { "role": "user", "content": "Olá!" },
    { "role": "assistant", "content": "Oi! Como posso ajudá-lo?" },
    { "role": "user", "content": "Como está o tempo?" }
  ]
}
```

Obter mais detalhes sobre quais opções são aceitas por este Agente solicitando este endpoint: [Obter Agente](https://docs.tess.im/pt-BR/api/endpoints/agents/get)

### **Resposta**

```json
{
"template_id": "8794",
"responses": [
  {
    "id": 4773337,
    "status": "starting",
    "input": "hello",
    "output": "",
    "credits": 0.000337,
    "root_id": 4773337,
    "created_at": "2025-01-05T19:35:21.000000Z",
    "updated_at": "2025-01-05T19:35:21.000000Z",
    "template_id": 8794
  }
]
}
```