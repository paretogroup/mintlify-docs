---
title: "Ejecutar Agente"
---

`POST /agents/{id}/execute`

Ejecuta un agente específico por ID.

### **Ejemplos de Código**

<CodeGroup>

```http cURL
curl --request POST \
  --url 'https://api.tess.im/agents/{id}/execute' \
  --header 'Authorization: Bearer YOUR_API_KEY' \
  --header 'Content-Type: application/json' \
  --data '{
    "temperature": "1",
    "model": "tess-5",
    "messages": [
        { "role": "user", "content": "Hello, how can you help me today?" }
    ],
    "tools": "no-tools",
    "wait_execution": false,
    "file_ids": [123, 321]
  }'
```


```json Node.js
const axios = require('axios');

const data = {
    "temperature": "1",
    "model": "tess-5",
    "messages": [
        { "role": "user", "content": "Hello, how can you help me today?" }
    ],
    "tools": "no-tools",
    "wait_execution": false,
    "file_ids": [123, 321]
  };

const config = {
  method: 'post',
  url: 'https://api.tess.im/agents/{id}/execute',
  headers: {
    'Authorization': 'Bearer YOUR_API_KEY',
    'Content-Type': 'application/json'
  },
  data: data
};

try {
  const response = await axios(config);
  console.log(response.data);
} catch (error) {
  console.error(error);
}
```


```python Python
import requests
import json

url = "https://api.tess.im/agents/{id}/execute"
headers = {
    "Authorization": "Bearer YOUR_API_KEY",
    "Content-Type": "application/json"
}
data = {
    "temperature": "1",
    "model": "tess-5",
    "messages": [
        { "role": "user", "content": "Hello, how can you help me today?" }
    ],
    "tools": "no-tools",
    "wait_execution": false,
    "file_ids": [123, 321]
  }

response = requests.post(url, headers=headers, json=data)
print(response.json())
```


```php PHP
<?php
$curl = curl_init();

$data = [
    "temperature" => "1",
    "model" => "tess-5",
    "messages" => [
        [ "role" => "user", "content" => "Hello, how can you help me today?" ]
    ],
    "tools" => "no-tools",
    "wait_execution" => false,
    "file_ids": [123, 321]
];

curl_setopt_array($curl, [
  CURLOPT_URL => "https://api.tess.im/agents/{id}/execute",
  CURLOPT_RETURNTRANSFER => true,
  CURLOPT_ENCODING => "",
  CURLOPT_MAXREDIRS => 10,
  CURLOPT_TIMEOUT => 30,
  CURLOPT_HTTP_VERSION => CURL_HTTP_VERSION_1_1,
  CURLOPT_CUSTOMREQUEST => "POST",
  CURLOPT_POSTFIELDS => json_encode($data),
  CURLOPT_HTTPHEADER => [
    "Authorization: Bearer YOUR_API_KEY",
    "Content-Type: application/json"
  ]
]);

$response = curl_exec($curl);
$err = curl_error($curl);

curl_close($curl);

if ($err) {
  echo "Error: " . $err;
} else {
  echo $response;
}
```


```java Java
import com.fasterxml.jackson.databind.ObjectMapper;
import java.net.URI;
import java.net.http.HttpClient;
import java.net.http.HttpRequest;
import java.net.http.HttpResponse;
import java.util.List;
import java.util.Map;

public class Main {
    public static void main(String[] args) throws Exception {
        ObjectMapper mapper = new ObjectMapper();

        Map<String, Object> data = Map.of(
            "temperature", "1",
            "model", "tess-5",
            "messages", List.of(Map.of("role", "user", "content", "Hello, how can you help me today?")),
            "tools", "no-tools",
            "wait_execution", false,
            "file_ids", List.of(123, 321)
        );

        String jsonPayload = mapper.writeValueAsString(data);

        HttpClient client = HttpClient.newHttpClient();
        HttpRequest request = HttpRequest.newBuilder()
            .uri(URI.create("https://api.tess.im/agents/{id}/execute"))
            .header("Authorization", "Bearer YOUR_API_KEY")
            .header("Content-Type", "application/json")
            .POST(HttpRequest.BodyPublishers.ofString(jsonPayload))
            .build();

        HttpResponse<String> response = client.send(request,
            HttpResponse.BodyHandlers.ofString());
        System.out.println(response.body());
    }
}
```


```go Go
package main

import (
    "fmt"
    "strings"
    "io/ioutil"
    "net/http"
)

func main() {
    payload := `{
        "temperature": "1",
        "model": "tess-5",
        "messages": [
            { "role": "user", "content": "Hello, how can you help me today?" }
        ],
        "tools": "no-tools",
        "wait_execution": false,
        "file_ids": [123, 321]
    }`

    client := &http.Client{}
    req, err := http.NewRequest("POST", "https://api.tess.im/agents/{id}/execute", strings.NewReader(payload))
    if err != nil {
        fmt.Println(err)
        return
    }
    
    req.Header.Add("Authorization", "Bearer YOUR_API_KEY")
    req.Header.Add("Content-Type", "application/json")
    
    resp, err := client.Do(req)
    if err != nil {
        fmt.Println(err)
        return
    }
    defer resp.Body.Close()
    
    body, err := ioutil.ReadAll(resp.Body)
    if err != nil {
        fmt.Println(err)
        return
    }
    
    fmt.Println(string(body))
}
```


```jsonnet .NET
using System;
using System.Net.Http;
using System.Text;
using System.Threading.Tasks;
using Newtonsoft.Json;
using System.Collections.Generic;

class Program
{
    static async Task Main(string[] args)
    {
        using (var client = new HttpClient())
        {
            client.DefaultRequestHeaders.Add("Authorization", "Bearer YOUR_API_KEY");

            var data = new
            {
                temperature = "1",
                model = "tess-5",
                messages = new List<object> { new { role = "user", content = "Hello, how can you help me today?" } },
                tools = "no-tools",
                wait_execution = false,
                file_ids = new List<int> { 123, 321 }
            };

            var jsonPayload = JsonConvert.SerializeObject(data);
            var content = new StringContent(jsonPayload, Encoding.UTF8, "application/json");

            try
            {
                var response = await client.PostAsync("https://api.tess.im/agents/{id}/execute", content);
                response.EnsureSuccessStatusCode();
                string responseBody = await response.Content.ReadAsStringAsync();
                Console.WriteLine(responseBody);
            }
            catch (HttpRequestException e)
            {
                Console.WriteLine("\nException Caught!");
                Console.WriteLine("Message :{0} ", e.Message);
            }
        }
    }
}
```


```ruby Ruby
require 'uri'
require 'net/http'
require 'json'

uri = URI('https://api.tess.im/agents/{id}/execute')
http = Net::HTTP.new(uri.host, uri.port)
http.use_ssl = true

request = Net::HTTP::Post.new(uri)
request['Authorization'] = 'Bearer YOUR_API_KEY'
request['Content-Type'] = 'application/json'
request.body = {
    "temperature": "1",
    "model": "tess-5",
    "messages": [
        { "role": "user", "content": "Hello, how can you help me today?" }
    ],
    "tools": "no-tools",
    "wait_execution": false,
    "file_ids": [123, 321]
}.to_json

response = http.request(request)
puts response.read_body
```

</CodeGroup>

### **Encabezados**

| **Parámetro**  | **Tipo** | **Requerido** | **Descripción**                                                                                               |
| :------------- | :------- | :------------ | :------------------------------------------------------------------------------------------------------------ |
| x-workspace-id | integer  | No            | ID del espacio de trabajo. Si no se proporciona, se utilizará el espacio de trabajo seleccionado del usuario. |

<Note>
  **Nota:** Este campo será requerido en una futura versión de la API. Se recomienda encarecidamente configurarlo ahora para asegurar la compatibilidad con futuras actualizaciones.
</Note>

### **Parámetros de Ruta**

| **Parámetro** | **Tipo** | **Requerido** | **Descripción**  |
| :------------ | :------- | :------------ | :--------------- |
| id            | integer  | Sí            | El ID del agente |

### **Cuerpo de la Solicitud**

| **Parámetro**  | **Tipo** | **Requerido**            | **Descripción**                                                                                                                                                                                                                                                          |
| :------------- | :------- | :----------------------- | :----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| answers        | object   | Sí                       | Las respuestas del agente                                                                                                                                                                                                                                                |
| messages       | array    | Solo para Agente de Chat | Los mensajes del agente                                                                                                                                                                                                                                                  |
| wait_execution | boolean  | No                       | Indica si la ejecución debe esperar hasta completarse. El tiempo de espera es de 100 segundos. Para ejecuciones más largas, use `wait_execution=false` en combinación con el endpoint Obtener Respuesta del Agente con una estrategia de sondeo (predeterminado: false). |
| file_ids       | array    | No                       | Array de IDs de archivos para adjuntar a la ejecución.                                                                                                                                                                                                                   |

#### **Roles de Mensajes (Plantillas de Tipo Chat)**

Para plantillas de tipo chat, el array `messages` admite los siguientes roles:

| **Rol**     | **Requerido** | **Descripción**                                                                            |
| :---------- | :------------ | :----------------------------------------------------------------------------------------- |
| `user`      | Sí            | Mensajes del usuario. Deben estar emparejados con mensajes `assistant`.                    |
| `assistant` | Sí            | Mensajes del asistente. Deben estar emparejados con mensajes `user`.                       |
| `developer` | No            | Mensaje opcional del desarrollador. **Solo permitido como el primer mensaje** en el array. |
| `system`    | No            | **No soportado**. Usar este rol causará un error.                                          |

**Reglas importantes:**

- Los mensajes deben alternar entre los roles `user` y `assistant` (después del mensaje opcional `developer`).
- El rol `developer` solo puede aparecer como el primer mensaje en el array y será extraído antes de procesar el resto.
- Si dos mensajes consecutivos tienen el mismo rol (por ejemplo, dos mensajes `user`), la API devolverá un error de validación: "Chat messages must be a pair of user/assistant".
- El rol `system` no está soportado y causará un error.

**Ejemplo con mensaje developer:**

```
{
  "messages": [
    { "role": "developer", "content": "Eres un asistente útil." },
    { "role": "user", "content": "¡Hola!" },
    { "role": "assistant", "content": "¡Hola! ¿Cómo puedo ayudarte?" },
    { "role": "user", "content": "¿Cómo está el clima?" }
  ]
}
```

**Ejemplo sin mensaje developer:**

```
{
  "messages": [
    { "role": "user", "content": "¡Hola!" },
    { "role": "assistant", "content": "¡Hola! ¿Cómo puedo ayudarte?" },
    { "role": "user", "content": "¿Cómo está el clima?" }
  ]
}
```

Obtenga más detalles sobre qué opciones acepta este Agente solicitando este endpoint: [Obtener Agente](https://docs.tess.im/es/api/endpoints/agents/get)

### **Respuesta**

```json
{
"template_id": "8794",
"responses": [
  {
    "id": 4773337,
    "status": "starting",
    "input": "hello",
    "output": "",
    "credits": 0.000337,
    "root_id": 4773337,
    "created_at": "2025-01-05T19:35:21.000000Z",
    "updated_at": "2025-01-05T19:35:21.000000Z",
    "template_id": 8794
  }
]
}
```